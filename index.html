<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1, shrink-to-fit=no, viewport-fit=cover">
	<meta name="color-scheme" content="light dark">

	<title>Zhi Liang</title>

	<!-- Favicon -->
	<!--<link rel="shortcut icon" href="./assets/img/favicon/favicon.ico" type="image/x-icon">-->
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

	<!-- Font -->
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700" rel="stylesheet">

	<!-- Radzen CSS -->
	<link rel="stylesheet" href="_content/Radzen.Blazor/css/standard-base.css">
	<style>
		body {
			background-position: 0% 0%;
		}

		.transition-effect {
			transition: opacity 0.5s ease; /* è¿™é‡Œçš„ 0.5s æ˜¯åŠ¨ç”»æŒç»­æ—¶é—´ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ */
			opacity: 1;
		}

			.transition-effect.hidden {
				opacity: 0;
			}
	</style>
	<link href="lib/simplebar/simplebar.css" rel="stylesheet" />
	<!-- Template CSS -->
	<link class="css-lt" rel="stylesheet" href="./css/css-lt.css" media="(prefers-color-scheme: light)">
	<link class="css-dk" rel="stylesheet" href="./css/css-dk.css" media="(prefers-color-scheme: dark)">

	<!-- Theme mode -->
	<script>

		// è·å–ç”¨æˆ·ä»£ç†
		var userAgent = navigator.userAgent;
		// å­˜å‚¨ç”¨æˆ·ä»£ç†åˆ°localStorageï¼Œä½¿ç”¨'UserAgent'ä½œä¸ºé”®
		localStorage.setItem('UserAgent', userAgent);
		// åœ¨æ§åˆ¶å°è¾“å‡ºç”¨æˆ·ä»£ç†
		console.log('UserAgent:', userAgent);
		console.log('UserAgent in LocalStorage:', localStorage.getItem("UserAgent"));

		if (localStorage.getItem('color-scheme')) {
			let scheme = localStorage.getItem('color-scheme');

			console.log('localStorage.getItem: scheme = ', scheme);
			console.log('scheme === \'light\' : ', scheme === 'light');
			console.log('scheme === \'dark\' : ', scheme === '\"dark\"');

			const LTCSS = document.querySelectorAll('link[class=css-lt]');
			const DKCSS = document.querySelectorAll('link[class=css-dk]');

			[...LTCSS].forEach((link) => {
				//link.media = (scheme === 'light') ? 'all' : 'not screen';
				link.media = (scheme === '1') ? 'all' : 'not screen';
			});

			[...DKCSS].forEach((link) => {
				//link.media = (scheme === 'dark') ? 'all' : 'not screen';
				link.media = (scheme === '0') ? 'all' : 'not screen';
			});
		}


		// æ£€æŸ¥æ˜¯å¦æ”¯æŒåª’ä½“æŸ¥è¯¢
		if (window.matchMedia) {
			// æ£€æŸ¥æš—è‰²æ¨¡å¼
			const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
			if (darkModeMediaQuery.matches) {
				console.log('ç”¨æˆ·ç³»ç»Ÿé¦–é€‰é¢œè‰²æ–¹æ¡ˆä¸ºæš—è‰²æ¨¡å¼ï¼ˆDark Modeï¼‰ã€‚');
			} else {
				console.log('ç”¨æˆ·ç³»ç»Ÿé¦–é€‰é¢œè‰²æ–¹æ¡ˆä¸ºäº®è‰²æ¨¡å¼ï¼ˆLight Modeï¼‰ã€‚');
			}

			// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ï¼Œä»¥ä¾¿åœ¨ç”¨æˆ·æ›´æ”¹ç³»ç»Ÿé¦–é€‰é¢œè‰²æ–¹æ¡ˆæ—¶å¾—åˆ°é€šçŸ¥
			darkModeMediaQuery.addListener((e) => {
				if (e.matches) {
					console.log('ç”¨æˆ·åˆ‡æ¢åˆ°æš—è‰²æ¨¡å¼ï¼ˆDark Modeï¼‰ã€‚');
				} else {
					console.log('ç”¨æˆ·åˆ‡æ¢åˆ°äº®è‰²æ¨¡å¼ï¼ˆLight Modeï¼‰ã€‚');
				}
			});
		} else {
			console.log('è¯¥æµè§ˆå™¨ä¸æ”¯æŒåª’ä½“æŸ¥è¯¢ã€‚');
		}

		window.getDarkModeStatus = function () {
			// åœ¨è¿™é‡Œå®ç°è·å–æš—è‰²æ¨¡å¼çŠ¶æ€çš„é€»è¾‘
			// è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰æ˜¯å¦ä¸ºæš—è‰²æ¨¡å¼
			// å¯ä»¥ä½¿ç”¨ matchMedia æˆ–å…¶ä»–æ–¹æ³•æ¥æ£€æµ‹æš—è‰²æ¨¡å¼çŠ¶æ€
			return window.matchMedia('(prefers-color-scheme: dark)').matches;
		}

		window.setColorScheme = function (scheme) {
			console.log('scheme:', scheme);

			const LTCSS = document.querySelectorAll('link[class=css-lt]');
			const DKCSS = document.querySelectorAll('link[class=css-dk]');

			[...LTCSS].forEach((link) => {
				//link.media = (scheme === 'light') ? 'all' : 'not screen';
				link.media = (scheme === '1') ? 'all' : 'not screen';
			});

			[...DKCSS].forEach((link) => {
				//link.media = (scheme === 'dark') ? 'all' : 'not screen';
				link.media = (scheme === '0') ? 'all' : 'not screen';
			});
		}

		//window.addAnimateAnimatedClass = (divId) => {
		//	const div = document.getElementById(divId);
		//	if (!div.classList.contains('animate__animated')) {
		//		div.classList.add('animate__animated');
		//	}
		//};

		//window.toggleVisibilityWithAnimation = (divId, isShown) => {
		//	const div = document.getElementById(divId);

		//	alert("ok");

		//	if (isShown) {
		//		div.classList.remove('animate__fadeOut');
		//		div.classList.add('animate__fadeIn');
		//		div.style.display = 'block';
		//	} else {
		//		div.classList.remove('animate__fadeIn');
		//		div.classList.add('animate__fadeOut');
		//		div.addEventListener('animationend', () => {
		//			div.style.display = 'none';
		//		}, { once: true });
		//	}
		//};



	</script>

	<!-- Original Begin -->
	<base href="/" />
	<!--<link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet" />-->
	<link href="lib/font-awesome/css/all.min.css" rel="stylesheet" />
	<link href="lib/animate.css/animate.min.css" rel="stylesheet" />
	<link href="css/loading.css" rel="stylesheet" />
	<!--<link href="css/app.css" rel="stylesheet" />-->
	<link href="css/treegrid.css" rel="stylesheet" />
	<link href="ZhiLiangPt.Client.styles.css" rel="stylesheet" />
	<!--<link href="manifest.json" rel="manifest" />-->
	<link href="manifest.webmanifest" rel="manifest" />
	<link rel="apple-touch-icon" sizes="512x512" href="logo512.png" />
	<link rel="apple-touch-icon" sizes="192x192" href="logo192.png" />
	<style>
		.swal-modal {
			border-radius: 1rem !important;
		}
	</style>
	<!-- Original End -->
</head>

<body>
	<div id="app">
		<div class="loading">Loading&#8230;</div>
	</div>
	<div id="blazor-error-ui">
		<!--An unhandled error has occurred.
		<a href="" class="reload">Reload</a>
		<a class="dismiss">ğŸ—™</a>-->
	</div>
	<script src="_framework/blazor.webassembly.js"></script>

	<!-- Radzen JS -->
	<script src="_content/Radzen.Blazor/Radzen.Blazor.js"></script>

	<script>
		/*navigator.serviceWorker.register('service-worker.js');*/
		navigator.serviceWorker.register('service-worker.js', { updateViaCache: 'none' });
	</script>
	<script src="lib/jquery/jquery.min.js"></script>
	<script src="lib/sweetalert/sweetalert.min.js"></script>
	<script src="lib/simplebar/simplebar.min.js"></script>
	<script>

		$(function () {

			var observer = new MutationObserver(function (mutations) {
				swal({
					title: "An unknown critical error has occurred",
					text: "All that can be done at the moment is to have the page automatically refresh and reload all programs after clicking the button below.",
					icon: "error",
					buttons: {
						OK: "OK"
					},
					dangerMode: true
				}).then(() => {
					window.location.reload();
				});;
			});
			var target = document.querySelector('#blazor-error-ui');
			observer.observe(target, {
				attributes: true
			});

		});



	</script>

	<!-- template -->
	<script src="./assets/js/vendor.js"></script>
	<!--<script src="./assets/js/template.js"></script>-->
	<script src="./assets/js/pack.js"></script>
</body>

</html>
